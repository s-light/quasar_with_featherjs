{"version":3,"sources":["webpack:///./src/pages/Simple.vue?17ae","webpack:///./src/api.js","webpack:///./src/pages/Simple.vue?17a5","webpack:///src/pages/Simple.vue","webpack:///./src/pages/Simple.vue"],"names":["socket","io","transports","api","feathers","configure","socketio","component","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_l","msg","key","id","attrs","text","_f","createdAt","_v","_s","messages","on","$event","type","indexOf","_k","keyCode","messageSend","scopedSlots","_u","fn","style","opacity","messagaeToSend","proxy","directives","name","rawName","connected","model","value","callback","$$v","expression","QPage","QChatMessage","QInput","QIcon","QBtn","Ripple"],"mappings":"kGAAA,I,kECMA,MAAMA,E,MAASC,GAAG,wBAAyB,CAAEC,WAAY,CAAC,eAS3CC,MAPHC,MACPC,UAAUC,IAASN,ICToU,ECkD5V,CACE,KAAF,KACA,CACM,eAAN,GACM,SAAN,EACQ,KAAR,cACQ,UAAR,eAIE,SAAF,CACI,UAAJ,WACM,OAAN,6CAGE,QAAF,CACI,YAAJ,WACM,QAAN,qBACM,QAAN,0CACM,MAAN,wBACA,wBACQ,EAAR,QACU,KAAV,sBAEQ,KAAR,kBACQ,QAAR,cAEQ,QAAR,2BAGM,QAAN,aAGE,QAAF,WACI,QAAJ,0BACI,MAAJ,wBAGI,EAAJ,iBACM,QAAN,qCACM,KAAN,mCAII,EAAJ,MACM,MAAN,CACQ,MAAR,CAAU,WAAV,GACQ,OAAR,MAEA,SAEM,QAAN,kCACM,KAAN,kBACA,UACM,QAAN,sCAUE,QAAF,CACI,OAAJ,YACM,IAAN,IACM,IACE,EAAR,cACA,UAGM,OAAN,0BAEI,eAAJ,YACM,OAAN,uCAGE,KAAF,a,yGCzHIO,EAAY,YACd,GJRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,YAAY,iEAAiE,CAACF,EAAG,UAAU,CAACE,YAAY,8BAA8B,CAACF,EAAG,MAAM,CAACG,YAAY,CAAC,MAAQ,OAAO,YAAY,UAAUP,EAAIQ,GAAIR,EAAY,UAAE,SAASS,GAAK,OAAOL,EAAG,iBAAiB,CAACM,IAAID,EAAIE,GAAGC,MAAM,CAAC,KAAO,CAACH,EAAII,MAAM,MAAQb,EAAIc,GAAG,iBAAPd,CAAyBS,EAAIM,iBAAgB,KAAKX,EAAG,UAAU,CAACA,EAAG,MAAM,CAACG,YAAY,CAAC,YAAY,UAAU,CAACP,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIc,GAAG,SAAPd,CAAiBA,EAAIkB,gBAAgBd,EAAG,UAAU,CAACA,EAAG,UAAU,CAACQ,MAAM,CAAC,OAAS,GAAG,MAAQ,gBAAgBO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQtB,EAAIuB,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOV,IAAI,SAAkB,KAAcV,EAAIyB,gBAAgBC,YAAY1B,EAAI2B,GAAG,CAAC,CAACjB,IAAI,SAASkB,GAAG,WAAW,MAAO,CAACxB,EAAG,SAAS,CAACE,YAAY,iBAAiBuB,MAAM,CAAEC,QAAiC,KAAvB9B,EAAI+B,eAAwB,UAAY,OAASnB,MAAM,CAAC,KAAO,SAASO,GAAG,CAAC,MAAQ,SAASC,GAAQpB,EAAI+B,eAAiB,SAASC,OAAM,GAAM,CAACtB,IAAI,QAAQkB,GAAG,WAAW,MAAO,CAACxB,EAAG,QAAQ,CAAC6B,WAAW,CAAC,CAACC,KAAK,SAASC,QAAQ,aAAavB,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,KAAO,GAAG,KAAO,OAAO,SAAWZ,EAAIoC,WAAWjB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIyB,oBAAoBO,OAAM,KAAQK,MAAM,CAACC,MAAOtC,EAAkB,eAAEuC,SAAS,SAAUC,GAAMxC,EAAI+B,eAAeS,GAAKC,WAAW,qBAAqB,OACz3C,IIUpB,EACA,KACA,KACA,MAIa,UAAA1C,EAAiB,QAOhC,IAASA,EAAW,aAAc,CAAC2C,QAAA,EAAMC,eAAA,EAAaC,SAAA,EAAOC,QAAA,EAAMC,OAAA,IAAO,IAAS/C,EAAW,aAAc,CAACgD,SAAA","file":"js/7.c0edc10a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-page',{staticClass:\"fit column no-wrap justify-center items-center content-center\"},[_c('section',{staticClass:\"q-pa-md row justify-center\"},[_c('div',{staticStyle:{\"width\":\"100%\",\"max-width\":\"400px\"}},_vm._l((_vm.messages),function(msg){return _c('q-chat-message',{key:msg.id,attrs:{\"text\":[msg.text],\"stamp\":_vm._f(\"prettyDateTime\")(msg.createdAt)}})}),1)]),_c('section',[_c('pre',{staticStyle:{\"font-size\":\"0.5em\"}},[_vm._v(_vm._s(_vm._f(\"pretty\")(_vm.messages)))])]),_c('section',[_c('q-input',{attrs:{\"filled\":\"\",\"label\":\"Send Message\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.messageSend()}},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",style:({opacity: (_vm.messagaeToSend !== '' ? 'inherit' : '0.1')}),attrs:{\"name\":\"close\"},on:{\"click\":function($event){_vm.messagaeToSend = ''}}})]},proxy:true},{key:\"after\",fn:function(){return [_c('q-btn',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],attrs:{\"round\":\"\",\"dense\":\"\",\"flat\":\"\",\"icon\":\"send\",\"disable\":!_vm.connected},on:{\"click\":function($event){return _vm.messageSend()}}})]},proxy:true}]),model:{value:(_vm.messagaeToSend),callback:function ($$v) {_vm.messagaeToSend=$$v},expression:\"messagaeToSend\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import feathers from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio-client'\n// import auth from '@feathersjs/authentication-client'\nimport io from 'socket.io-client'\n\n// const socket = io('http://localhost:8080/api', { transports: ['websocket'] })\nconst socket = io('http://localhost:3030', { transports: ['websocket'] })\n\nconst api = feathers()\n    .configure(socketio(socket))\n// .configure(auth({ storage: window.localStorage }))\n\n// api.service('/users')\n// api.service('/messages')\n\nexport default api\n","import mod from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Simple.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Simple.vue?vue&type=script&lang=js&\"","<template>\n    <q-page class=\"fit column no-wrap justify-center items-center content-center\">\n        <section class=\"q-pa-md row justify-center\">\n            <div style=\"width: 100%; max-width: 400px\">\n                <q-chat-message\n                    v-for=\"msg in messages\"\n                    :key=\"msg.id\"\n                    :text=\"[msg.text]\"\n                    :stamp=\"msg.createdAt | prettyDateTime\"\n                />\n            </div>\n        </section>\n        <section>\n            <pre style=\"font-size:0.5em\">{{ messages | pretty }}</pre>\n        </section>\n        <section>\n            <q-input\n            filled\n            label=\"Send Message\"\n            v-model=\"messagaeToSend\"\n            @keyup.enter=\"messageSend()\"\n            >\n            <template v-slot:append>\n                <q-icon\n                :style=\"{opacity: (messagaeToSend !== '' ? 'inherit' : '0.1')}\"\n                name=\"close\"\n                @click=\"messagaeToSend = ''\"\n                class=\"cursor-pointer\"\n                />\n            </template>\n            <template v-slot:after>\n                <q-btn\n                round\n                v-ripple\n                dense\n                flat\n                icon=\"send\"\n                :disable=\"!connected\"\n                @click=\"messageSend()\"\n                />\n            </template>\n        </q-input>\n    </section>\n</q-page>\n</template>\n\n<script>\nimport { date } from 'quasar'\nimport api from '../api'\n\nexport default {\n    data () {\n        return {\n            messagaeToSend: '',\n            messages: [{\n                text: 'Hello World',\n                createdAt: '20200101'\n            }]\n        }\n    },\n    computed: {\n        connected: function () {\n            return api.service('messages').connection.connected\n        }\n    },\n    methods: {\n        messageSend: function () {\n            console.group('messageSend')\n            console.log('messagaeToSend', this.messagaeToSend)\n            const serviceMessage = api.service('messages')\n            if (serviceMessage.connection.connected) {\n                serviceMessage.create({\n                    text: this.messagaeToSend\n                })\n                this.messagaeToSend = ''\n                console.log('send.')\n            } else {\n                console.log('connection offline.')\n            }\n            // console.log('done.', api.service('messages'))\n            console.groupEnd()\n        }\n    },\n    mounted: function () {\n        console.log('PageIndex mounted.')\n        const messagesService = api.service('messages')\n        // console.log('messagesService', messagesService)\n        // Listen to message events\n        messagesService.on('created', messagesNew => {\n            console.log('message created', this.messages)\n            this.messages = this.messages.concat(messagesNew)\n        })\n        // init from server\n        // this.messages = await app.service('messages').find()\n        messagesService.find({\n            query: {\n                $sort: { createdAt: -1 },\n                $limit: 25\n            }\n        }).then((respons) => {\n            // messagesService.find().then(function (respons) {\n            console.log('messageService.find then', respons)\n            this.messages = respons.data\n        }).catch((error) => {\n            console.log('messageService.find catch', error)\n        })\n        // console.log('messageService.find', messagesService.find())\n        // api.io.on('disconnect', (reason) => {\n        //     console.log('messageService disconnect')\n        // })\n        // api.io.on('connected', () => {\n        //     console.log('messageService connected.')\n        // })\n    },\n    filters: {\n        pretty: function (value) {\n            let valueJson = value\n            try {\n                valueJson = JSON.parse(value)\n            } catch (e) {\n                // console.log(value, e)\n            }\n            return JSON.stringify(valueJson, null, 4)\n        },\n        prettyDateTime: function (value) {\n            return date.formatDate(value, 'HH:mm DD.MM.YYYY')\n        }\n    },\n    name: 'PageIndex'\n}\n</script>\n","import { render, staticRenderFns } from \"./Simple.vue?vue&type=template&id=05e51f1c&\"\nimport script from \"./Simple.vue?vue&type=script&lang=js&\"\nexport * from \"./Simple.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QChatMessage from 'quasar/src/components/chat/QChatMessage.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';import Ripple from 'quasar/src/directives/Ripple.js';\nimport qInstall from \"../../node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\";\nqInstall(component, 'components', {QPage,QChatMessage,QInput,QIcon,QBtn});qInstall(component, 'directives', {Ripple});\n"],"sourceRoot":""}